<jb-modal
  [template]="authModalTemplate"
  (closeEvent)="initAuthForm()"
></jb-modal>

<ng-template #authModalTemplate>
  <div class="jb-auth-logo jb-ft-clr-teal">
    <jb-avatar [text]="'JobBot'" [backgroundColor]="'#D9D9D9'"></jb-avatar>
  </div>
  <div class="jb-auth-container-bar jb-bg-clr-navy"></div>
  <div class="jb-auth-form-wrapper">
    <form [formGroup]="authFormGroup">
      <jb-prompt
        *ngIf="!!authResponseError"
        [prompt]="authResponseError"
      ></jb-prompt>
      <ng-container *ngIf="isLogin">
        <jb-input
          class="jb-auth-form"
          [placeholder]="'Email'"
          [formControlName]="EMAIL"
        ></jb-input>
        <jb-input
          class="jb-auth-form"
          [type]="'password'"
          [placeholder]="'Password'"
          [formControlName]="PASSWORD"
        ></jb-input>
        <button class="btn btn-link jb-ft-classic jb-ft-clr-red">
          {{ 'auth-modal.loginForm.forget' | translate }}
        </button>
      </ng-container>
      <ng-container *ngIf="!isLogin && !isRoleScreen">
        <jb-input
          class="jb-auth-form"
          [placeholder]="'auth-modal.form.placeholder.username' | translate"
          [formControlName]="USERNAME"
        ></jb-input>
        <jb-input
          class="jb-auth-form"
          [placeholder]="'Email'"
          [formControlName]="EMAIL"
        ></jb-input>
        <jb-input
          class="jb-auth-form"
          [type]="'password'"
          [placeholder]="'auth-modal.form.placeholder.password' | translate"
          [formControlName]="PASSWORD"
        ></jb-input>
        <jb-input
          class="jb-auth-form"
          [type]="'password'"
          [placeholder]="'Re-enter password'"
          [formControlName]="RE_ENTER_PASSWORD"
        ></jb-input>
      </ng-container>
      <ng-container *ngIf="isRoleScreen">
        <jb-dropdown
          [placeholder]="'auth-modal.form.placeholder.workingRight' | translate"
          [actionList]="['true', 'false']"
          [formControlName]="WORK_ELIGIBILITY"
        ></jb-dropdown>
        <jb-dropdown
          *ngIf="authFormGroup.get(WORK_ELIGIBILITY).value == 'false'"
          [type]="'typeahead'"
          [placeholder]="'auth-modal.form.placeholder.visaType' | translate"
          [actionList]="['500', '485']"
          [formControlName]="VISA_TYPE"
        ></jb-dropdown>
        <jb-input
          [placeholder]="'auth-modal.form.placeholder.idCardNumber' | translate"
          [formControlName]="ID_CARD_NUMBER"
        ></jb-input>
        <button
          class="btn btn-link jb-ft-classic jb-ft-clr-red"
          (click)="skipRoleScreenAndSubmit()"
        >
          {{ 'auth-modal.registerForm.roleScreen.skip' | translate }}
        </button>
      </ng-container>
    </form>
  </div>
  <div class="jb-auth-func-group">
    <button
      type="button"
      class="btn btn-link jb-auth-switch-button jb-ft-classic jb-ft-clr-teal"
      (click)="switchLoginRegister()"
    >
      {{
        (isLogin
          ? 'auth-modal.loginForm.register'
          : 'auth-modal.registerForm.login'
        ) | translate
      }}
    </button>
    <button
      (click)="onSubmit()"
      type="submit"
      class="btn btn-primary jb-auth-submit-button jb-btn-l-sqr jb-bdr-c jb-btn-clr-grey jb-btn-l-sqr"
    >
      <div class="jb-btn-l-sqr jb-icon jb-i-check jb-icon-orange"></div>
    </button>
  </div>
</ng-template>
